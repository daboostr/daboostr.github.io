:root{
  --bg:#0b0f14;
  --panel:#121826;
  --panel-2:#0f1522;
  --border:#1f2a44;
  --text:#e6eefc;
  --muted:#9bb0d0;
  --accent:#6aa9ff;
  --success:#22c55e;
  --warning:#f59e0b;
  --danger:#ef4444;
  --pending:#374151;
  --running:#60a5fa;
  --shadow: 0 8px 30px rgba(0,0,0,0.35);
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  background: radial-gradient(1000px 800px at 70% -20%, #142136 0%, var(--bg) 50%);
  color:var(--text);
  font: 14px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji","Segoe UI Emoji";
}

.app{ max-width:1200px; margin:0 auto; padding:24px; }

.app-header{
  display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom:16px;
}
.brand{ display:flex; align-items:center; gap:10px; color:var(--muted); }
.brand svg{ color:var(--accent); }
.controls{ display:flex; align-items:center; gap:10px; }

.btn{
  appearance:none; border:none; border-radius:10px; padding:10px 14px; cursor:pointer;
  color:var(--text); background:var(--panel-2); border:1px solid var(--border);
}
.btn.primary{ background: linear-gradient(180deg,#1b3a6c,#142540); border-color:#27426d; }
.btn:disabled{ opacity:0.6; cursor:not-allowed; }
.btn.ghost{ background:transparent; }

.toggle{ display:flex; align-items:center; gap:8px; color:var(--muted); user-select:none; }
.toggle input{ transform: translateY(1px); }

.layout{
  display:grid; grid-template-columns: 1.1fr 1fr; gap:16px;
}
@media (max-width: 980px){
  .layout{ grid-template-columns: 1fr; }
}

.card{
  background: linear-gradient(180deg, rgba(20,31,50,0.9), rgba(14,20,33,0.9));
  border:1px solid var(--border);
  border-radius:16px;
  box-shadow: var(--shadow);
  overflow:hidden;
}

.call-panel{ display:flex; flex-direction:column; min-height:480px; }
.call-header{
  display:grid; grid-template-columns: 1fr 120px 1fr; align-items:center; gap:8px;
  padding:16px; border-bottom:1px solid var(--border); background:rgba(16,22,36,0.6);
}
.party{ display:flex; align-items:center; gap:12px; }
.party .avatar{
  width:48px; height:48px; border-radius:50%; display:grid; place-items:center;
  background: radial-gradient(120% 100% at 30% 20%, #1f2d49, #0f1a2c);
  border:1px solid var(--border);
  position:relative;
}
.party.speaking .avatar::after{
  content:""; position:absolute; inset:-6px; border-radius:50%;
  border:2px solid var(--accent); opacity:0.6; animation: pulse 1.4s ease-out infinite;
}
@keyframes pulse{
  0% { transform: scale(0.95); opacity:0.7; }
  70% { transform: scale(1.1); opacity:0.1; }
  100% { transform: scale(0.95); opacity:0; }
}
.party svg{ width:28px; height:28px; color:#a8c8ff; fill: none; stroke: currentColor; }
.party.ivr svg rect, .party.ivr svg circle{ fill: currentColor; stroke:none; color:#8ec1ff; }
.party .label{ display:flex; flex-direction:column; }
.party .name{ font-weight:600; }
.party .status{ color:var(--muted); font-size:12px; }

.call-visual{
  height:54px; display:grid; place-items:center;
}
.wave{
  width:100%; height:10px; position:relative; overflow:hidden; opacity:0.8;
  background: linear-gradient(90deg, transparent, rgba(106,169,255,0.3), transparent);
}
.wave::before, .wave::after{
  content:""; position:absolute; left:-50%; right:-50%; height:2px; top:4px;
  background: linear-gradient(90deg, transparent, #6aa9ff, transparent);
  animation: sweep 2.6s linear infinite;
}
.wave::after{ top:6px; opacity:0.5; animation-duration: 3.4s; }
@keyframes sweep{
  0%{ transform: translateX(-40%); }
  100%{ transform: translateX(40%); }
}

.transcript{
  padding:16px; display:flex; flex-direction:column; gap:10px; overflow:auto; flex:1;
}
.msg{
  max-width: 86%;
  padding:10px 12px; border-radius:12px; border:1px solid var(--border);
  background: #0f1627;
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
}
.msg.human{
  align-self:flex-start; background: linear-gradient(180deg,#141f35,#0d1629);
}
.msg.ivr{
  align-self:flex-end; background: linear-gradient(180deg,#11243f,#0b1930);
}
.msg .meta{ display:flex; align-items:center; gap:8px; color:var(--muted); font-size:12px; margin-bottom:4px; }
.msg .text{ white-space:pre-wrap; }

.agents-panel{ display:flex; flex-direction:column; min-height:480px; }
.agents-header{
  display:flex; align-items:center; justify-content:space-between; padding:12px 16px;
  border-bottom:1px solid var(--border);
}
.agents-header h2{ margin:0; font-size:16px; }
.legend{ display:flex; align-items:center; gap:12px; color:var(--muted); font-size:12px; }
.legend .dot{ display:inline-block; width:9px; height:9px; border-radius:50%; margin-right:6px; }
.legend .pending{ background:var(--pending); }
.legend .running{ background:var(--running); }
.legend .success{ background:var(--success); }
.legend .failed{ background:var(--danger); }

.timeline{ height:6px; background:#0b1324; margin:12px 16px; border-radius:999px; overflow:hidden; border:1px solid var(--border); }
.progress{ height:100%; background: linear-gradient(90deg, #3b82f6, #22c55e); width:0%; transition: width 300ms ease; }

.agents-list{ padding:8px 12px 16px; display:flex; flex-direction:column; gap:10px; overflow:auto; }
.agent{
  border:1px solid var(--border); border-radius:12px; background: #0d1424;
  padding:10px; display:grid; grid-template-columns: auto 1fr auto; gap:10px; align-items:start;
}
.agent .state-dot{
  width:10px; height:10px; border-radius:50%; margin-top:4px; background:var(--pending);
  box-shadow:0 0 0 3px rgba(255,255,255,0.02) inset;
}
.agent .state-dot.running { background: var(--running); animation: blink 1.2s ease-in-out infinite alternate; }
.agent .state-dot.success { background: var(--success); }
.agent .state-dot.failed  { background: var(--danger); }

@keyframes blink{
  from{ filter: brightness(0.8) }
  to{ filter: brightness(1.4) }
}

.agent .title{ font-weight:600; }
.agent .desc{ color:var(--muted); font-size:12px; }
.agent .right{ display:flex; align-items:center; gap:8px; }
.badge{
  font-size:11px; padding:4px 8px; border-radius:999px; border:1px solid var(--border);
  background:#0a1222; color:var(--muted);
}
.badge.success{ color:#b9f7cf; border-color:#174b2e; background: #0a1a12; }
.badge.failed{ color:#ffd7d7; border-color:#5b1f1f; background: #1a0e0e; }

.logs{
  grid-column: 1 / -1;
  background: #0a1222; border:1px dashed #1b2a49; border-radius:10px; padding:8px; margin-top:6px;
  max-height: 120px; overflow:auto; font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; font-size:12px; color:#cfe0ff;
}
.logline{ opacity:0.9; }
.logtime{ color:#7ea3ff; margin-right:6px; }
.kv{ color:#b7c7e5; }

.app-footer{
  display:flex; align-items:center; justify-content:space-between; margin-top:14px; color:var(--muted);
  padding:8px 4px;
}